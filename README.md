# Тестовое задание

## Запуск проекта
Для локального запуска и тестирования неоходимо поднять контейнер с БД. Сделать это можно с помощью docker-compose 
(Порт выбран по умолчанию: 5432)

```bash
docker compose up -d
```

Далее проект можно запустить любым удобным способом, либо через редактор, либо командой ниже

```bash
mvn spring-boot:run
```

## Тестовые данные
 С помощью Liquibase загруженны юзеры по которым можно получать токены.

```
first@mail.ru, 78451654811    
second@mail.ru', '78464854811    
fhird@mail.ru', '78458524811
```

##### Парметры токена
```
Указаны в файле application.yaml
Срок жизни токена - 1 минута    
Доступные попытки в определенный период - 2    
Период в который проверются попытки - 1 минута    
```

##### [Ссылка на Swagger](http://localhost:8080/swagger-ui/index.html#/)
 
## Схема базы данных

### Таблица пользователей (usr_t)
| Поле   | Тип         | Описание                 |
|--------|-------------|--------------------------|
| id     | UUID        | Уникальный идентификатор |
| email  | VARCHAR(60) | Имя пользователя         |
| number | VARCHAR(11) | Номер телефона           |


### Таблица токенов (token)
| Поле       | Тип        | Описание                   |
|------------|------------|----------------------------|
| id         | UUID       | Уникальный идентификатор   |
| usr_id     | UUID       | Идентификатор пользователя |
| code       | VARCHAR(6) | код                        |
| created_at | TIMESTAMP  | Дата создания              |

### Таблица попыток (attempts)
| Поле       | Тип       | Описание                 |
|------------|-----------|--------------------------|
| id         | UUID      | Уникальный идентификатор |
| token_id   | UUID      | Идентификатор токена     |
| status     | status    | статус                   |
| created_at | TIMESTAMP | Дата создания            |